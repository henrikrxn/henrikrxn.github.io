<p>This post describes how to configure Git so that <code>user.name</code> and <code>user.email</code> change
depending on the working directory.</p>
<p>The latest Git at the time of writing was 2.13.0 on Windows. I expect some of
the issues will go away in future Git versions.</p>
<p>I use Github at work and have decided to have two profiles to keep things
compartmentalized. One for work and one for my spare time.</p>
<p>Using multiple SSH keys has been a known workaround for quite some time. It has
been described in many blogs and articles. I used this
<a href="https://ricardianambivalence.com/2013/09/22/github-for-work-and-play-multiple-accounts/">blog post</a>
and <a href="https://code.tutsplus.com/tutorials/quick-tip-how-to-work-with-github-and-multiple-accounts--net-22574">this blog</a>
for information about the initial set-up.</p>
<p>But there is still the matter of the user name and e-mail associated with git.</p>
<p>It has been a minor annoyance and I have accidentally used my private account to
push to my work repositories once or twice.</p>
<p>However Git 2.13 contains a new feature,
<a href="https://git-scm.com/docs/git-config#_includes">Conditinal Include</a>,
which can help you have multiple user names and e-mails. There are however a
few caveats I encountered along the way.</p>
<p>First a short sample of what worked for me. Start by adding conditional includes
to your .gitconfig.</p>
<script src="//gist.github.com/henrikrxn/2b72e323ffd6003749074d8206723d64.js" type="text/javascript"></script>
<p>Then you can have a .work.gitconfig</p>
<script src="//gist.github.com/henrikrxn/cded8d9d4df8119ba8a2a958f4663bc5.js" type="text/javascript"></script>
<p>and a .sparetime.gitconfig</p>
<script src="//gist.github.com/henrikrxn/aa17c56be689c4292ee2e9323e26264f.js" type="text/javascript"></script>
<p>There are a couple of things to take note of when adding conditional includes:</p>
<ul>
<li><p><strong>If you also have <code>user.name</code> and <code>user.email</code> in your <code>.gitconfig</code> file.</strong>
If you decide to configure default values for these then remember to do so
<em>before</em> the conditional includes. Otherwise your defaults will overwrite anything
from the conditional includes.</p>
</li>
<li><p><strong>The path to the included files is relative to your .gitconfig</strong>. When I was
having problems getting it to work I tried ~ as shorthand for my home directory,
but could not get that to work</p>
</li>
<li><p><strong>Also *nix style full paths do not work on Windows</strong>. You must use paths
like, e.g. <code>D:/Work/</code></p>
</li>
</ul>
<p>And a last tip for easy debugging of which configurations are loaded and from
which file they were loaded:</p>
<p><code>git config --show-origin --list</code></p>
